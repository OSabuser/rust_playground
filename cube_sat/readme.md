# CubeSat (работа с BorrowChecker)

## Ошибка 1
В строке [1] владение переходит к локальной переменной *sat_id* функции check_status().
Далее владение не возвращается в область видимости функции main!
Для структуры sat не реализован типаж Copy. **Для простых числовых типов (u8, i32...) он реализован по умолчанию =>
подобной ошибки не возникает, т.к. в локальной области видимости будет создана копия типа.**

`let sat_c  = CubeSat{sat_id:2};
[1]let c_status = check_status(sat_c);
...
[2]let c_status = check_status(sat_c);`

Как только область видимости владельца перестаёт существовать, удалаются все "принадлежащие" ему значения (метод Drop) - вызывается деструктор (внедряется компилятором rustc).


> Каждое значение в Rust - **ВЛАДЕНИЕ**.
Владение - это понятие, используемое в сообществе Rust для обозначения
процесса времени компиляции, который проверяет, что каждое использование значения
допустимо и что каждое значение полностью уничтожено.

Передача владения осуществляется:
- При операции присваивания;
- При передаче через функциональный барьер (в качестве аргумента или возвращаемого значения).

`let sat_c  = CubeSat{sat_id:2};
let sat_new  = sat_c;`
(*sat_new* теперь владеет *CubeSat{sat_id:2}*, *sat_c* - недействительное значение)

## Important
1. Если полное владение не требуется, используются ссылки;
2. Можно продублировать значение;
3. Стоит избегать большого количества "долгоживущих" объектов;
4. Вместо запроса "владения" в определённых функциях можно воспользоваться "заимствованием".

> Заимствование - использование ссылки на переменную. Для чтения - & T, чтения-записи - &mut T.

![Borrow vs Reference](image.png)